(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{6942:function(e,l,a){Promise.resolve().then(a.bind(a,4296))},4296:function(e,l,a){"use strict";a.d(l,{default:function(){return h}});var s=a(7437),i=a(2265);function t(e){var l,a;let{item:i}=e;return(0,s.jsxs)("div",{className:"card product-card",children:[(0,s.jsx)("div",{className:"product-image",children:i.imageUrl?(0,s.jsx)("img",{src:i.imageUrl,alt:i.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):(0,s.jsx)("div",{style:{width:"100%",height:"100%",background:"#efe7dd",display:"flex",alignItems:"center",justifyContent:"center"},children:"画像なし"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{style:{fontWeight:600,color:"var(--ink)"},children:i.name}),(0,s.jsxs)("p",{children:["\xa5",i.price.toLocaleString()]}),(0,s.jsx)("p",{children:null!==(l=i.brand)&&void 0!==l?l:i.site}),(0,s.jsxs)("p",{children:["サイズ予測: ",null!==(a=i.sizePrediction)&&void 0!==a?a:"M"]}),(0,s.jsx)("p",{style:{fontSize:"0.8rem"},children:"購入前に公式サイズ表で確認してください。"})]}),(0,s.jsx)("a",{className:"btn",href:i.url,target:"_blank",rel:"noreferrer",children:"購入ページへ"})]})}let n={freeText:"白のきれいめトップス",itemType:"tops",budgetMin:3e3,budgetMax:12e3,season:[],color:[],material:[],mood:"",exclude:[]},c=[{value:"tops",label:"トップス"},{value:"outer",label:"アウター"},{value:"bottoms",label:"ボトムス"},{value:"onepiece",label:"ワンピース"},{value:"shoes",label:"シューズ"},{value:"bags",label:"バッグ"},{value:"others",label:"その他"}],d=["春","夏","秋","冬"],r=["白","黒","ベージュ","ブラウン","グレー","ネイビー","ブルー","グリーン"],o=["コットン","リネン","ウール","ニット","デニム","レザー"],u=["きれいめ","カジュアル","モード","ミニマル","オフィス","リラックス"];function h(){var e;let[l,a]=(0,i.useState)(n),[h,m]=(0,i.useState)([]),[x,v]=(0,i.useState)(!1),[p,j]=(0,i.useState)(null),b=(0,i.useMemo)(()=>({minPercent:(l.budgetMin-100)/19900*100,maxPercent:(l.budgetMax-100)/19900*100}),[l.budgetMin,l.budgetMax]),g=async()=>{v(!0),j(null);try{var e;let a=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,exclude:null===(e=l.exclude)||void 0===e?void 0:e.filter(Boolean)})});if(!a.ok)throw Error("Search failed");let s=await a.json();m(s.items)}catch(e){j("検索に失敗しました。条件を変えて再試行してください。")}finally{v(!1)}},N=e=>{a(l=>{var a;let s=null!==(a=l.season)&&void 0!==a?a:[];return s.includes(e)?{...l,season:s.filter(l=>l!==e)}:{...l,season:[...s,e]}})},f=(e,l)=>{a(a=>{var s;let i=null!==(s=a[e])&&void 0!==s?s:[];return i.includes(l)?{...a,[e]:i.filter(e=>e!==l)}:{...a,[e]:[...i,l]}})},y=(e,l)=>{a(a=>({...a,[e]:a[e]===l?"":l}))},M=e=>{let s=Math.min(e,l.budgetMax-100);a({...l,budgetMin:s})},k=e=>{let s=Math.max(e,l.budgetMin+100);a({...l,budgetMax:s})};return(0,s.jsxs)("section",{className:"fade-in",style:{display:"grid",gap:22},children:[(0,s.jsxs)("div",{className:"card",style:{display:"grid",gap:20},children:[(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"自由記述"}),(0,s.jsx)("textarea",{className:"input",rows:3,value:l.freeText,onChange:e=>a({...l,freeText:e.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"アイテム種別"}),(0,s.jsx)("div",{className:"chip-group",children:c.map(e=>(0,s.jsx)("button",{className:"chip","data-selected":l.itemType===e.value,onClick:()=>a({...l,itemType:e.value}),type:"button",children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"予算"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600},children:[(0,s.jsxs)("span",{children:["\xa5",l.budgetMin.toLocaleString()]}),(0,s.jsx)("span",{children:l.budgetMax>=2e4?"上限なし":"\xa5".concat(l.budgetMax.toLocaleString())})]}),(0,s.jsxs)("div",{className:"range",children:[(0,s.jsx)("div",{className:"range-track"}),(0,s.jsx)("div",{className:"range-active",style:{left:"".concat(b.minPercent,"%"),width:"".concat(b.maxPercent-b.minPercent,"%")}}),(0,s.jsx)("input",{type:"range",min:100,max:2e4,step:100,value:l.budgetMin,onChange:e=>M(Number(e.target.value))}),(0,s.jsx)("input",{type:"range",min:100,max:2e4,step:100,value:l.budgetMax,onChange:e=>k(Number(e.target.value))})]})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"季節"}),(0,s.jsx)("div",{className:"chip-group",children:d.map(e=>{var a;return(0,s.jsx)("button",{className:"chip","data-selected":null===(a=l.season)||void 0===a?void 0:a.includes(e),onClick:()=>N(e),type:"button",children:e},e)})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"色"}),(0,s.jsx)("div",{className:"chip-group",children:r.map(e=>{var a;return(0,s.jsx)("button",{className:"chip","data-selected":null===(a=l.color)||void 0===a?void 0:a.includes(e),onClick:()=>f("color",e),type:"button",children:e},e)})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"素材"}),(0,s.jsx)("div",{className:"chip-group",children:o.map(e=>{var a;return(0,s.jsx)("button",{className:"chip","data-selected":null===(a=l.material)||void 0===a?void 0:a.includes(e),onClick:()=>f("material",e),type:"button",children:e},e)})})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"雰囲気"}),(0,s.jsx)("div",{className:"chip-group",children:u.map(e=>(0,s.jsx)("button",{className:"chip","data-selected":l.mood===e,onClick:()=>y("mood",e),type:"button",children:e},e))})]}),(0,s.jsxs)("div",{className:"field",children:[(0,s.jsx)("div",{className:"label",children:"NGワード"}),(0,s.jsx)("input",{className:"input",placeholder:"例: セット, 福袋",value:(null!==(e=l.exclude)&&void 0!==e?e:[]).join(","),onChange:e=>a({...l,exclude:e.target.value.split(",").map(e=>e.trim())})})]}),(0,s.jsx)("button",{className:"btn",onClick:g,disabled:x,children:x?"検索中...":"探す"}),p&&(0,s.jsx)("p",{children:p})]}),(0,s.jsx)("div",{className:"results-grid",children:h.map(e=>(0,s.jsx)(t,{item:e},e.id))})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6942)}),_N_E=e.O()}]);