(()=>{var e={};e.id=797,e.ids=[797],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},86540:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),t(74460),t(34376),t(35866);var s=t(23191),l=t(88716),r=t(37922),i=t.n(r),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(a,c);let o=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,74460)),"/home/ayaka/develop/clozly/app/search/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,34376)),"/home/ayaka/develop/clozly/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ayaka/develop/clozly/app/search/page.tsx"],u="/search/page",h={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},60686:(e,a,t)=>{Promise.resolve().then(t.bind(t,78143)),Promise.resolve().then(t.bind(t,4657)),Promise.resolve().then(t.bind(t,70952)),Promise.resolve().then(t.t.bind(t,79404,23))},97630:(e,a,t)=>{Promise.resolve().then(t.bind(t,92230))},27414:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},78143:(e,a,t)=>{"use strict";t.d(a,{default:()=>r});var s=t(10326),l=t(77109);function r({children:e}){return s.jsx(l.SessionProvider,{children:e})}},4657:(e,a,t)=>{"use strict";t.d(a,{default:()=>i});var s=t(10326),l=t(77109),r=t(90434);function i(){var e;let{data:a}=(0,l.useSession)(),t=(e=a?.user?.name)?e.trim().split(" ").map(e=>e[0]).join("").slice(0,2).toUpperCase():"";return s.jsx(r.default,{href:"/account",className:"auth-circle","data-logged-in":!!a?.user,"aria-label":"アカウント",children:t||""})}},92230:(e,a,t)=>{"use strict";t.d(a,{default:()=>h});var s=t(10326),l=t(17577);function r({item:e}){return(0,s.jsxs)("div",{className:"card product-card",children:[s.jsx("div",{className:"product-image",children:e.imageUrl?s.jsx("img",{src:e.imageUrl,alt:e.name,style:{width:"100%",height:"100%",objectFit:"cover"}}):s.jsx("div",{style:{width:"100%",height:"100%",background:"#efe7dd",display:"flex",alignItems:"center",justifyContent:"center"},children:"画像なし"})}),(0,s.jsxs)("div",{children:[s.jsx("p",{style:{fontWeight:600,color:"var(--ink)"},children:e.name}),(0,s.jsxs)("p",{children:["\xa5",e.price.toLocaleString()]}),s.jsx("p",{children:e.brand??e.site}),(0,s.jsxs)("p",{children:["サイズ予測: ",e.sizePrediction??"M"]}),s.jsx("p",{style:{fontSize:"0.8rem"},children:"購入前に公式サイズ表で確認してください。"})]}),s.jsx("a",{className:"btn",href:e.url,target:"_blank",rel:"noreferrer",children:"購入ページへ"})]})}let i={freeText:"白のきれいめトップス",itemType:"tops",budgetMin:3e3,budgetMax:12e3,season:[],color:[],material:[],mood:"",exclude:[]},n=[{value:"tops",label:"トップス"},{value:"outer",label:"アウター"},{value:"bottoms",label:"ボトムス"},{value:"onepiece",label:"ワンピース"},{value:"shoes",label:"シューズ"},{value:"bags",label:"バッグ"},{value:"others",label:"その他"}],c=["春","夏","秋","冬"],o=["白","黒","ベージュ","ブラウン","グレー","ネイビー","ブルー","グリーン"],d=["コットン","リネン","ウール","ニット","デニム","レザー"],u=["きれいめ","カジュアル","モード","ミニマル","オフィス","リラックス"];function h(){let[e,a]=(0,l.useState)(i),[t,h]=(0,l.useState)([]),[p,m]=(0,l.useState)(!1),[x,v]=(0,l.useState)(null),b=(0,l.useMemo)(()=>({minPercent:(e.budgetMin-100)/19900*100,maxPercent:(e.budgetMax-100)/19900*100}),[e.budgetMin,e.budgetMax]),g=async()=>{m(!0),v(null);try{let a=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,exclude:e.exclude?.filter(Boolean)})});if(!a.ok)throw Error("Search failed");let t=await a.json();h(t.items)}catch(e){v("検索に失敗しました。条件を変えて再試行してください。")}finally{m(!1)}},j=e=>{a(a=>{let t=a.season??[];return t.includes(e)?{...a,season:t.filter(a=>a!==e)}:{...a,season:[...t,e]}})},f=(e,t)=>{a(a=>{let s=a[e]??[];return s.includes(t)?{...a,[e]:s.filter(e=>e!==t)}:{...a,[e]:[...s,t]}})},y=(e,t)=>{a(a=>({...a,[e]:a[e]===t?"":t}))},N=t=>{let s=Math.min(t,e.budgetMax-100);a({...e,budgetMin:s})},P=t=>{let s=Math.max(t,e.budgetMin+100);a({...e,budgetMax:s})};return(0,s.jsxs)("section",{className:"fade-in",style:{display:"grid",gap:22},children:[(0,s.jsxs)("div",{className:"card",style:{display:"grid",gap:20},children:[(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"自由記述"}),s.jsx("textarea",{className:"input",rows:3,value:e.freeText,onChange:t=>a({...e,freeText:t.target.value})})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"アイテム種別"}),s.jsx("div",{className:"chip-group",children:n.map(t=>s.jsx("button",{className:"chip","data-selected":e.itemType===t.value,onClick:()=>a({...e,itemType:t.value}),type:"button",children:t.label},t.value))})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"予算"}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:600},children:[(0,s.jsxs)("span",{children:["\xa5",e.budgetMin.toLocaleString()]}),s.jsx("span",{children:e.budgetMax>=2e4?"上限なし":`\xa5${e.budgetMax.toLocaleString()}`})]}),(0,s.jsxs)("div",{className:"range",children:[s.jsx("div",{className:"range-track"}),s.jsx("div",{className:"range-active",style:{left:`${b.minPercent}%`,width:`${b.maxPercent-b.minPercent}%`}}),s.jsx("input",{type:"range",min:100,max:2e4,step:100,value:e.budgetMin,onChange:e=>N(Number(e.target.value))}),s.jsx("input",{type:"range",min:100,max:2e4,step:100,value:e.budgetMax,onChange:e=>P(Number(e.target.value))})]})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"季節"}),s.jsx("div",{className:"chip-group",children:c.map(a=>s.jsx("button",{className:"chip","data-selected":e.season?.includes(a),onClick:()=>j(a),type:"button",children:a},a))})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"色"}),s.jsx("div",{className:"chip-group",children:o.map(a=>s.jsx("button",{className:"chip","data-selected":e.color?.includes(a),onClick:()=>f("color",a),type:"button",children:a},a))})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"素材"}),s.jsx("div",{className:"chip-group",children:d.map(a=>s.jsx("button",{className:"chip","data-selected":e.material?.includes(a),onClick:()=>f("material",a),type:"button",children:a},a))})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"雰囲気"}),s.jsx("div",{className:"chip-group",children:u.map(a=>s.jsx("button",{className:"chip","data-selected":e.mood===a,onClick:()=>y("mood",a),type:"button",children:a},a))})]}),(0,s.jsxs)("div",{className:"field",children:[s.jsx("div",{className:"label",children:"NGワード"}),s.jsx("input",{className:"input",placeholder:"例: セット, 福袋",value:(e.exclude??[]).join(","),onChange:t=>a({...e,exclude:t.target.value.split(",").map(e=>e.trim())})})]}),s.jsx("button",{className:"btn",onClick:g,disabled:p,children:p?"検索中...":"探す"}),x&&s.jsx("p",{children:x})]}),s.jsx("div",{className:"results-grid",children:t.map(e=>s.jsx(r,{item:e},e.id))})]})}},70952:(e,a,t)=>{"use strict";t.d(a,{default:()=>i});var s=t(10326),l=t(35047);let r=[{href:"/search",label:"探す"},{href:"/quiz",label:"タイプ診断"},{href:"/basic",label:"基本情報"}];function i(){let e=(0,l.usePathname)(),a=(0,l.useRouter)();return s.jsx("nav",{className:"tabs",role:"tablist","aria-label":"メインタブ",children:r.map(t=>s.jsx("button",{className:"tab","data-active":e===t.href,role:"tab","aria-selected":e===t.href,onClick:()=>a.push(t.href),type:"button",children:t.label},t.href))})}},34376:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>j,metadata:()=>g});var s=t(19510);t(67272);var l=t(68570);let r=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/app/providers.tsx`),{__esModule:i,$$typeof:n}=r;r.default;let c=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/app/providers.tsx#default`),o=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/components/TopNav.tsx`),{__esModule:d,$$typeof:u}=o;o.default;let h=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/components/TopNav.tsx#default`),p=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/components/AuthBar.tsx`),{__esModule:m,$$typeof:x}=p;p.default;let v=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/components/AuthBar.tsx#default`);var b=t(57371);let g={title:"Clozly",description:"Curated clothing choices without the search fatigue."};function j({children:e}){return s.jsx("html",{lang:"ja",children:s.jsx("body",{children:s.jsx(c,{children:(0,s.jsxs)("div",{className:"page",children:[s.jsx("header",{className:"topbar",children:(0,s.jsxs)("div",{className:"topbar-inner",children:[(0,s.jsxs)("div",{className:"topbar-left",children:[s.jsx(b.default,{className:"logo",href:"/search",children:"Clozly"}),s.jsx(h,{})]}),s.jsx(v,{})]})}),s.jsx("main",{className:"content",children:e})]})})})})}},74460:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var s=t(19510),l=t(68570);let r=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/components/SearchClient.tsx`),{__esModule:i,$$typeof:n}=r;r.default;let c=(0,l.createProxy)(String.raw`/home/ayaka/develop/clozly/components/SearchClient.tsx#default`);function o(){return s.jsx(c,{})}},67272:()=>{}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[948,514],()=>t(86540));module.exports=s})();